<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Universal Path Resolver - Loads first, cached across pages -->
    <script src="./common/core/path-resolver-init.js"></script>

<!-- Import map for module path aliases -->
    <script type="importmap">
      {
        "imports": {
          "@/": "/common/",
          "#/": "/shared/",
          "$/": "/pages/"
        }
      }
    </script>

<meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    /><title>Legacy Concierge - Premier In-Home Nursing Care</title>

    <!-- Favicons -->
    <link rel="icon" href="./favicon.svg" />
    <link rel="mask-icon" href="./mask-icon.svg" color="#5bbad5" />
    <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
    <meta
      name="description"
      content="Experience the pinnacle of private nursing with Legacy Concierge. Our elite, compassionate nurses provide bespoke in-home care, from post-op recovery to chronic condition management."
    />
    <link rel="canonical" href="https://www.legacyconcierge.com/index" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.legacyconcierge.com/index" />
    <meta
      property="og:title"
      content="Legacy Concierge - Premier In-Home Nursing Care"
    />
    <meta
      property="og:description"
      content="Experience the pinnacle of private nursing with Legacy Concierge. Our elite, compassionate nurses provide bespoke in-home care, from post-op recovery to chronic condition management."
    />
    <meta
      property="og:image"
      content="https://www.legacyconcierge.com/assets/media/team/team-nurse.jpg"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://www.legacyconcierge.com/index"
    />
    <meta
      property="twitter:title"
      content="Legacy Concierge - Premier In-Home Nursing Care"
    />
    <meta
      property="twitter:description"
      content="Experience the pinnacle of private nursing with Legacy Concierge. Our elite, compassionate nurses provide bespoke in-home care, from post-op recovery to chronic condition management."
    />
    <meta
      property="twitter:image"
      content="https://www.legacyconcierge.com/assets/media/team/team-nurse.jpg"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Google Fonts: SRI not used as content is dynamically generated per user agent -->
    <!-- For production, consider self-hosting fonts for better security and performance -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Work+Sans:wght@400&family=Montserrat:wght@400;600&family=Poppins:wght@400;500&display=swap"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./shared/theme/style.css" />
  </head>

  <body itemscope itemtype="http://schema.org/WebPage">
    <a href="#main" class="skip-link" data-i18n="accessibility.skipToMain"></a>

    <!-- Header Component -->
    <lc-header transparent></lc-header>

    <main role="main" id="main">
      <section id="hero">
        <div class="container">
          <h1 itemprop="name" data-i18n="title"></h1>
          <p class="page-subtitle" data-i18n="subtitle"></p>
          <a href="#contact" class="cta-button" data-i18n="ctaButton"></a>
        </div>
      </section>

      <section
        id="info-cards"
        class="container fade-in"
        itemprop="hasPart"
        itemscope
        itemtype="http://schema.org/ItemList"
      >
        <meta itemprop="name" content="Core Benefits" />
        <lc-card-grid id="info-card-grid" columns="4"></lc-card-grid>
      </section>

      <section id="pinnacle" class="container fade-in">
        <div class="pinnacle-content">
          <h3 data-i18n="pinnacle.superTitle"></h3>
          <h2 data-i18n="pinnacle.title"></h2>
          <p data-i18n="pinnacle.text"></p>
          <ul class="comparison-list">
            <li>
              <span data-i18n="pinnacle.comparisonItems[0].label"></span>
              <span
                class="ratio"
                data-i18n="pinnacle.comparisonItems[0].ratio"
              ></span>
            </li>
            <li>
              <span data-i18n="pinnacle.comparisonItems[1].label"></span>
              <span
                class="ratio"
                data-i18n="pinnacle.comparisonItems[1].ratio"
              ></span>
            </li>
            <li>
              <span data-i18n="pinnacle.comparisonItems[2].label"></span>
              <span
                class="ratio"
                data-i18n="pinnacle.comparisonItems[2].ratio"
              ></span>
            </li>
            <li class="legacy-ratio">
              <span data-i18n="pinnacle.comparisonItems[3].label"></span>
              <span
                class="ratio"
                data-i18n="pinnacle.comparisonItems[3].ratio"
              ></span>
            </li>
          </ul>
        </div>
        <div class="pinnacle-image">
          <img
            data-i18n-attr="src:pinnacle.image|alt:pinnacle.imageAlt"
            loading="lazy"
            decoding="async"
          />
        </div>
      </section>

      <section id="our-story" class="fade-in">
        <div class="container">
          <div class="story-header">
            <h2 data-i18n="ourStory.title"></h2>
          </div>
          <div class="story-content">
            <div class="story-column">
              <h4 data-i18n="ourStory.columns[0].title"></h4>
              <p data-i18n="ourStory.columns[0].text"></p>
            </div>
            <div class="story-column">
              <h4 data-i18n="ourStory.columns[1].title"></h4>
              <p data-i18n="ourStory.columns[1].text"></p>
            </div>
          </div>
        </div>
      </section>

      <section
        id="testimonials"
        class="fade-in"
        itemprop="review"
        itemscope
        itemtype="http://schema.org/Review"
      >
        <div class="container">
          <h2 itemprop="name" data-i18n="testimonials.title"></h2>
          <div class="testimonial-grid">
            <lc-card variant="testimonial">
              <p slot="quote" data-i18n="testimonials.cards[0].quote"></p>
              <p slot="author" data-i18n="testimonials.cards[0].author"></p>
              <p slot="title" data-i18n="testimonials.cards[0].title"></p>
            </lc-card>
            <lc-card variant="testimonial">
              <p slot="quote" data-i18n="testimonials.cards[1].quote"></p>
              <p slot="author" data-i18n="testimonials.cards[1].author"></p>
              <p slot="title" data-i18n="testimonials.cards[1].title"></p>
            </lc-card>
            <lc-card variant="testimonial">
              <p slot="quote" data-i18n="testimonials.cards[2].quote"></p>
              <p slot="author" data-i18n="testimonials.cards[2].author"></p>
              <p slot="title" data-i18n-attr="testimonials.cards[2].title"></p>
            </lc-card>
          </div>
        </div>
      </section>

      <section
        id="care-model"
        class="container fade-in"
        itemprop="hasPart"
        itemscope
        itemtype="http://schema.org/HowTo"
      >
        <h2 itemprop="name" data-i18n="careModel.title"></h2>
        <h3 data-i18n="careModel.subtitle"></h3>
        <ol class="care-steps">
          <li itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
            <h4 itemprop="name" data-i18n="careModel.steps[0].title"></h4>
            <p itemprop="text" data-i18n="careModel.steps[0].text"></p>
          </li>
          <li itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
            <h4 itemprop="name" data-i18n="careModel.steps[1].title"></h4>
            <p itemprop="text" data-i18n="careModel.steps[1].text"></p>
          </li>
          <li itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
            <h4 itemprop="name" data-i18n="careModel.steps[2].title"></h4>
            <p itemprop="text" data-i18n="careModel.steps[2].text"></p>
          </li>
          <li itemprop="step" itemscope itemtype="http://schema.org/HowToStep">
            <h4 itemprop="name" data-i18n="careModel.steps[3].title"></h4>
            <p itemprop="text" data-i18n="careModel.steps[3].text"></p>
          </li>
        </ol>
      </section>

      <!-- Contact Form Section -->
      <div id="contact-form-container" hidden></div>
    </main>

    <!-- Footer Component -->
    <lc-footer></lc-footer>

    <!-- Existing Scripts -->
    <script src="./common/services/theme.js"></script>
    <script src="./common/utils/app.js"></script>
    <script src="./common/services/i18n.js"></script>

    <!-- Component System -->
    <script type="module">
      import { loadTemplates } from "@/core/component-loader.js";

      // Function to populate info cards
      async function populateInfoCards() {
        try {
          const response = await fetch("/shared/content/_locale/en/home.json");
          const data = await response.json();
          const infoCards = data.infoCards;
          const cardGrid = document.getElementById("info-card-grid");

          infoCards.forEach((card, index) => {
            const cardElement = document.createElement("lc-card");
            cardElement.setAttribute("variant", "info");

            const icon = document.createElement("lc-icon");
            icon.setAttribute("slot", "icon");
            icon.setAttribute("name", card.icon || "shield-success");
            icon.setAttribute("size", "medium");
            icon.setAttribute("color", "primary");
            icon.setAttribute("aria-label", card.title);

            const title = document.createElement("h4");
            title.setAttribute("slot", "title");
            title.textContent = card.title;

            const text = document.createElement("p");
            text.textContent = card.text;

            cardElement.appendChild(icon);
            cardElement.appendChild(title);
            cardElement.appendChild(text);

            cardGrid.appendChild(cardElement);
          });
        } catch (error) {
          console.error("Failed to populate info cards:", error);
        }
      }

      // Load templates and initialize components
      (async () => {
        try {
          // Load all required templates first
          const templateResults = await loadTemplates(
            ["header", "footer", "cards", "contact"],
            true
          );
          const allLoaded = templateResults.every((result) => result === true);

          if (!allLoaded) {
            console.error("✗ Some templates failed to load:", templateResults);
            console.error("  Check the console for fetch errors above");
            return;
          }

          console.log("✓ All component templates loaded successfully");

          // Import component scripts
          await Promise.all([
            import("/common/components/lc-header.js"),
            import("/common/components/lc-footer.js"),
            import("/common/components/lc-card.js"),
            import("/common/components/lc-icon.js"),
          ]);
          console.log("✓ Component scripts loaded successfully");

          // Populate info cards
          await populateInfoCards();

          // Inject contact form
          const contactFormContainer = document.getElementById(
            "contact-form-container"
          );
          const contactFormResponse = await fetch(
            "/shared/partials/templates/contact.html"
          );
          const contactFormHtml = await contactFormResponse.text();
          contactFormContainer.innerHTML = contactFormHtml;

          // Wait a tick for components to render
          await new Promise((resolve) => setTimeout(resolve, 100));

          // Re-apply i18n translations to components
          if (window.applyTranslations) {
            await window.applyTranslations();
            console.log("✓ i18n translations applied to components");
          }

          // Setup theme toggle (now that component has rendered)
          if (window.setupThemeToggle) {
            window.setupThemeToggle();
          }

          // Setup language toggle (now that component has rendered)
          const languageToggle = document.querySelector(".language-toggle");
          if (languageToggle && window.switchLanguage) {
            languageToggle.addEventListener("click", () => {
              const currentLang = document.documentElement.lang;
              const newLang = currentLang === "en" ? "es" : "en";
              window.switchLanguage(newLang);
            });
            console.log("✓ Language toggle initialized");
          }
        } catch (error) {
          console.error("Failed to initialize components:", error);
        }
      })();
    </script>

    <!-- Development Tools (Web Vitals, etc.) -->
    <script type="module" src="./common/tools/dev-tools.js"></script>
  </body>
</html>
