<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Composite Components - Legacy Concierge</title>

  <!-- Design Tokens -->
  <link rel="stylesheet" href="../tokens/design-tokens.css">
  <link rel="stylesheet" href="../tokens/component-tokens.css">
  <link rel="stylesheet" href="../tokens/base.css">

  <style>
    body {
      margin: 0;
      min-height: 100vh;
      padding: var(--space-8) var(--space-4);
      background: var(--bg-page);
    }

    .demo-header {
      max-width: var(--container-xl);
      margin: 0 auto var(--space-12);
      text-align: center;
    }

    .demo-header__title {
      font-family: var(--font-family-serif);
      font-size: var(--font-size-4xl);
      font-weight: var(--font-weight-bold);
      color: var(--text-primary);
      margin: 0 0 var(--space-3);
    }

    .demo-header__description {
      font-size: var(--font-size-lg);
      color: var(--text-secondary);
      margin: 0;
    }

    .demo-section {
      max-width: var(--container-xl);
      margin: 0 auto var(--space-16);
      padding: var(--space-8);
      background: var(--bg-surface);
      border: 1px solid var(--border-default);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-card);
    }

    .demo-section__title {
      font-family: var(--font-family-serif);
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-bold);
      color: var(--text-primary);
      margin: 0 0 var(--space-2);
    }

    .demo-section__description {
      font-size: var(--font-size-base);
      color: var(--text-secondary);
      margin: 0 0 var(--space-8);
    }

    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-4);
    }

    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: var(--space-4);
      margin-bottom: var(--space-6);
    }

    .gallery-grid img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: var(--radius-base);
      cursor: pointer;
      transition: transform var(--transition-fast);
    }

    .gallery-grid img:hover {
      transform: scale(1.05);
    }

    .demo-placeholder {
      padding: var(--space-16);
      text-align: center;
      background: var(--bg-surface-secondary);
      border: 2px dashed var(--border-default);
      border-radius: var(--radius-base);
      color: var(--text-muted);
    }
  </style>

  <!-- Load utilities -->
  <script type="module">
    import '../utilities/path-resolver.js';
    import '../utilities/theme-manager.js';
  </script>

  <!-- Load components -->
  <script type="module" src="../components/base/Component.js"></script>
  <script type="module" src="../components/atomic/lc-button.js"></script>
  <script type="module" src="../components/composite/lc-modal.js"></script>
  <script type="module" src="../components/composite/lc-tabs.js"></script>
  <script type="module" src="../components/composite/lc-accordion.js"></script>
  <script type="module" src="../components/composite/lc-slider.js"></script>
  <script type="module" src="../components/composite/lc-dropdown.js"></script>
  <script type="module" src="../components/composite/lc-lightbox.js"></script>
</head>
<body>

  <!-- Header -->
  <header class="demo-header">
    <h1 class="demo-header__title">Composite Components</h1>
    <p class="demo-header__description">
      Complex interactive patterns combining multiple components with full accessibility
    </p>
  </header>

  <!-- Modal Component -->
  <section class="demo-section">
    <h2 class="demo-section__title">Modal Dialog</h2>
    <p class="demo-section__description">
      Modal dialogs with backdrop, focus trap, and keyboard navigation. Prevents body scroll when open.
    </p>

    <div class="demo-grid">
      <lc-button variant="primary" id="open-modal-basic">
        Open Basic Modal
      </lc-button>

      <lc-button variant="secondary" id="open-modal-large">
        Open Large Modal
      </lc-button>

      <lc-button variant="outline" id="open-modal-no-dismiss">
        Non-dismissible Modal
      </lc-button>
    </div>

    <!-- Basic Modal -->
    <lc-modal id="modal-basic" title="Basic Modal" size="base">
      <p>This is a basic modal dialog. You can close it by clicking the X button, clicking the backdrop, or pressing Escape.</p>
      <p>The focus is trapped within the modal while it's open, and will be restored to the trigger button when closed.</p>
      <div slot="footer">
        <lc-button variant="outline" id="close-modal-basic">Cancel</lc-button>
        <lc-button variant="primary" id="confirm-modal-basic">Confirm</lc-button>
      </div>
    </lc-modal>

    <!-- Large Modal -->
    <lc-modal id="modal-large" title="Large Modal with More Content" size="lg">
      <h3>Lorem Ipsum Dolor Sit Amet</h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      <h3>Additional Content</h3>
      <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
      <div slot="footer">
        <lc-button variant="outline" id="close-modal-large">Close</lc-button>
      </div>
    </lc-modal>

    <!-- Non-dismissible Modal -->
    <lc-modal id="modal-no-dismiss" title="Non-dismissible Modal" size="base" dismissible="false">
      <p>This modal cannot be dismissed by clicking the backdrop or pressing Escape. You must click the Close button.</p>
      <div slot="footer">
        <lc-button variant="primary" id="close-modal-no-dismiss">Close</lc-button>
      </div>
    </lc-modal>
  </section>

  <!-- Tabs Component -->
  <section class="demo-section">
    <h2 class="demo-section__title">Tabs</h2>
    <p class="demo-section__description">
      Tabbed interface with keyboard navigation (Arrow keys, Home, End) and three visual variants.
    </p>

    <h3 style="margin-bottom: var(--space-4);">Line Variant (Default)</h3>
    <lc-tabs active="tab1" variant="line">
      <div slot="tabs">
        <button data-tab="tab1">Overview</button>
        <button data-tab="tab2">Features</button>
        <button data-tab="tab3">Pricing</button>
      </div>

      <div data-panel="tab1">
        <h3>Overview</h3>
        <p>This is the overview panel. It contains general information about our service.</p>
      </div>

      <div data-panel="tab2">
        <h3>Features</h3>
        <ul>
          <li>Feature 1: Advanced functionality</li>
          <li>Feature 2: Easy to use</li>
          <li>Feature 3: Fully customizable</li>
        </ul>
      </div>

      <div data-panel="tab3">
        <h3>Pricing</h3>
        <p>Our pricing is competitive and transparent. Contact us for a quote.</p>
      </div>
    </lc-tabs>

    <h3 style="margin: var(--space-8) 0 var(--space-4);">Enclosed Variant</h3>
    <lc-tabs active="settings" variant="enclosed">
      <div slot="tabs">
        <button data-tab="settings">Settings</button>
        <button data-tab="security">Security</button>
        <button data-tab="notifications">Notifications</button>
      </div>

      <div data-panel="settings">
        <h3>Settings</h3>
        <p>Configure your account settings here.</p>
      </div>

      <div data-panel="security">
        <h3>Security</h3>
        <p>Manage your security preferences and two-factor authentication.</p>
      </div>

      <div data-panel="notifications">
        <h3>Notifications</h3>
        <p>Control how and when you receive notifications.</p>
      </div>
    </lc-tabs>

    <h3 style="margin: var(--space-8) 0 var(--space-4);">Pills Variant</h3>
    <lc-tabs active="profile" variant="pills">
      <div slot="tabs">
        <button data-tab="profile">Profile</button>
        <button data-tab="activity">Activity</button>
        <button data-tab="preferences">Preferences</button>
      </div>

      <div data-panel="profile">
        <h3>Profile</h3>
        <p>View and edit your profile information.</p>
      </div>

      <div data-panel="activity">
        <h3>Activity</h3>
        <p>See your recent activity and history.</p>
      </div>

      <div data-panel="preferences">
        <h3>Preferences</h3>
        <p>Customize your experience with preferences.</p>
      </div>
    </lc-tabs>
  </section>

  <!-- Accordion Component -->
  <section class="demo-section">
    <h2 class="demo-section__title">Accordion</h2>
    <p class="demo-section__description">
      Collapsible content sections with smooth animations and keyboard navigation (Arrow keys, Home, End).
    </p>

    <h3 style="margin-bottom: var(--space-4);">Default Variant</h3>
    <lc-accordion
      items='[
        {
          "title": "What services do you offer?",
          "content": "<p>We offer comprehensive digital legacy management, legal support, memorial services, and concierge support for families dealing with end-of-life planning and execution.</p>",
          "open": true
        },
        {
          "title": "How does pricing work?",
          "content": "<p>Our pricing is transparent and based on the services you need. We offer flexible packages and custom solutions tailored to your specific requirements.</p>"
        },
        {
          "title": "Is my data secure?",
          "content": "<p>Absolutely. We use bank-level encryption and follow industry best practices to ensure your sensitive information is always protected.</p>"
        },
        {
          "title": "Can I cancel anytime?",
          "content": "<p>Yes, you can cancel your subscription at any time with no penalties. We believe in providing value that keeps you as a customer, not contracts.</p>"
        }
      ]'
    ></lc-accordion>

    <h3 style="margin: var(--space-8) 0 var(--space-4);">Bordered Variant</h3>
    <lc-accordion
      variant="bordered"
      items='[
        {
          "title": "Section 1",
          "content": "<p>Content for section 1 with bordered styling.</p>"
        },
        {
          "title": "Section 2",
          "content": "<p>Content for section 2 with bordered styling.</p>"
        }
      ]'
    ></lc-accordion>

    <h3 style="margin: var(--space-8) 0 var(--space-4);">Allow Multiple Open</h3>
    <lc-accordion
      allow-multiple
      variant="filled"
      items='[
        {
          "title": "First Item",
          "content": "<p>This accordion allows multiple panels to be open at the same time.</p>"
        },
        {
          "title": "Second Item",
          "content": "<p>Try opening both panels simultaneously.</p>"
        }
      ]'
    ></lc-accordion>
  </section>

  <!-- Slider Component -->
  <section class="demo-section">
    <h2 class="demo-section__title">Slider / Carousel</h2>
    <p class="demo-section__description">
      Image and content carousel with navigation, autoplay, and touch gestures. Use arrow keys to navigate.
    </p>

    <lc-slider
      autoplay
      interval="4000"
      slides='[
        {
          "image": "https://images.unsplash.com/photo-1551434678-e076c223a692?w=800",
          "alt": "Team collaboration",
          "title": "Welcome to Legacy Concierge",
          "caption": "Helping families preserve digital legacies"
        },
        {
          "image": "https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=800",
          "alt": "Professional service",
          "title": "Expert Guidance",
          "caption": "Professional support every step of the way"
        },
        {
          "image": "https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=800",
          "alt": "Secure platform",
          "title": "Secure & Private",
          "caption": "Bank-level security for your sensitive information"
        }
      ]'
    ></lc-slider>
  </section>

  <!-- Dropdown Component -->
  <section class="demo-section">
    <h2 class="demo-section__title">Dropdown Menu</h2>
    <p class="demo-section__description">
      Dropdown menus for actions and options with keyboard navigation (Arrow keys, Home, End, Enter, Escape).
    </p>

    <div class="demo-grid">
      <lc-dropdown
        placement="bottom-start"
        items='[
          {"label": "Edit", "icon": "pencil"},
          {"label": "Duplicate", "icon": "copy"},
          {"label": "Archive", "icon": "archive"},
          {"divider": true},
          {"label": "Delete", "icon": "trash"}
        ]'
      >
        <lc-button slot="trigger">Actions</lc-button>
      </lc-dropdown>

      <lc-dropdown
        placement="bottom-end"
        items='[
          {"label": "Profile", "href": "#profile"},
          {"label": "Settings", "href": "#settings"},
          {"divider": true},
          {"label": "Sign Out", "icon": "logout"}
        ]'
      >
        <lc-button slot="trigger" variant="outline">Account</lc-button>
      </lc-dropdown>

      <lc-dropdown
        trigger="hover"
        items='[
          {"label": "View", "icon": "eye"},
          {"label": "Download", "icon": "download"},
          {"label": "Share", "icon": "share"}
        ]'
      >
        <lc-button slot="trigger" variant="secondary">Hover Me</lc-button>
      </lc-dropdown>
    </div>
  </section>

  <!-- Lightbox Component -->
  <section class="demo-section">
    <h2 class="demo-section__title">Lightbox Gallery</h2>
    <p class="demo-section__description">
      Image lightbox with navigation, thumbnails, and keyboard controls (Arrow keys, Escape).
    </p>

    <div class="gallery-grid">
      <img
        src="https://images.unsplash.com/photo-1551434678-e076c223a692?w=400"
        alt="Gallery image 1"
        data-lightbox-index="0"
      >
      <img
        src="https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400"
        alt="Gallery image 2"
        data-lightbox-index="1"
      >
      <img
        src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=400"
        alt="Gallery image 3"
        data-lightbox-index="2"
      >
      <img
        src="https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?w=400"
        alt="Gallery image 4"
        data-lightbox-index="3"
      >
    </div>

    <lc-lightbox
      id="gallery-lightbox"
      show-thumbnails
      images='[
        {
          "src": "https://images.unsplash.com/photo-1551434678-e076c223a692?w=1200",
          "alt": "Team collaboration",
          "title": "Team Collaboration",
          "description": "Working together to achieve great things"
        },
        {
          "src": "https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=1200",
          "alt": "Professional service",
          "title": "Professional Service",
          "description": "Expert guidance every step of the way"
        },
        {
          "src": "https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=1200",
          "alt": "Business meeting",
          "title": "Business Meeting",
          "description": "Discussing strategies and planning ahead"
        },
        {
          "src": "https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?w=1200",
          "alt": "Technology",
          "title": "Modern Technology",
          "description": "Leveraging technology for better outcomes"
        }
      ]'
    ></lc-lightbox>
  </section>

  <!-- Event Listeners and Interactions -->
  <script type="module">
    // Modal interactions
    document.getElementById('open-modal-basic')?.addEventListener('click', () => {
      document.getElementById('modal-basic').open();
    });

    document.getElementById('close-modal-basic')?.addEventListener('click', () => {
      document.getElementById('modal-basic').close();
    });

    document.getElementById('confirm-modal-basic')?.addEventListener('click', () => {
      alert('Confirmed!');
      document.getElementById('modal-basic').close();
    });

    document.getElementById('open-modal-large')?.addEventListener('click', () => {
      document.getElementById('modal-large').open();
    });

    document.getElementById('close-modal-large')?.addEventListener('click', () => {
      document.getElementById('modal-large').close();
    });

    document.getElementById('open-modal-no-dismiss')?.addEventListener('click', () => {
      document.getElementById('modal-no-dismiss').open();
    });

    document.getElementById('close-modal-no-dismiss')?.addEventListener('click', () => {
      document.getElementById('modal-no-dismiss').close();
    });

    // Lightbox interactions
    document.querySelectorAll('[data-lightbox-index]').forEach(img => {
      img.addEventListener('click', () => {
        const index = parseInt(img.dataset.lightboxIndex, 10);
        const lightbox = document.getElementById('gallery-lightbox');
        lightbox.open(index);
      });
    });

    // Dropdown interactions
    document.addEventListener('lc-dropdown-select', (event) => {
      console.log('Dropdown item selected:', event.detail.item);
      if (event.detail.item.label === 'Delete') {
        alert('Delete action clicked');
      }
    });

    // Log all composite component events
    document.addEventListener('lc-modal-open', (_e) => {
      console.log('Modal opened');
    });

    document.addEventListener('lc-modal-close', (_e) => {
      console.log('Modal closed');
    });

    document.addEventListener('lc-tab-change', (e) => {
      console.log('Tab changed to:', e.detail.activeTab);
    });

    document.addEventListener('lc-accordion-open', (e) => {
      console.log('Accordion panel opened:', e.detail.index);
    });

    document.addEventListener('lc-accordion-close', (e) => {
      console.log('Accordion panel closed:', e.detail.index);
    });

    document.addEventListener('lc-slider-change', (e) => {
      console.log('Slider changed to:', e.detail.index);
    });

    document.addEventListener('lc-lightbox-open', (_e) => {
      console.log('Lightbox opened');
    });

    document.addEventListener('lc-lightbox-close', (_e) => {
      console.log('Lightbox closed');
    });
  </script>
</body>
</html>
